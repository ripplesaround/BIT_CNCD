一些其他的知识

---

### STP配置与分析

起因：自学习算法导致广播风暴，MAC地址不稳定（兜圈子）

第二层协议，运行在网桥或交换机上

#### 要点

不改变网络的实际拓扑，但在逻辑上切断某些链路，使得从一台主机到所有其他主机的路径是无环路的<u>树状结构</u>。

- 消除环路
- 链路备份

#### STP报文

BPDU （Bridge Protocol Data Unit, 网桥协议数据单元）确定拓扑结构

- 配置BPDU
- 拓扑变化通告BPDU（TCN BPDU）

#### STP中的角色

1. 根网桥

   每个广播域中只有一个根网桥，但不是固定的。交换机或网桥的BID决定。

2. 根端口

   非根网桥设备上离根网桥最近的端口。

3. 指定端口

   网段中达到根网桥路径最短或代价最小的那个端口。

4. 指定网桥

5. 阻塞端口

#### STP操作

##### 构建过程

- 选择根网桥
- 选择根端口
- 选择指定端口

##### STP协议的原则

- 每个广播域中只有一个根网桥，根网桥的端口都是指定端口
- 每个非根网桥都有一个根端口
- 每个网段只有一个指定端口，非指定端口不被使用。

